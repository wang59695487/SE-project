#在线预订需求说明书

##outline

1. 引言
	1. 编写目的
	2. 背景
	3. 定义
2. 任务概述
	1. 目标
	- 用户特点
	- 假定和约束
- 需求规定
	1. 对功能的规定
		1. 用例描述
		- 用例图
	- 对性能的规定
		1. 精度
		- 时间特性要求
		-  灵活度
	- 输入输出要求
		1. 数据流定义表
		- 数据元素定义表
	- 数据管理能力要求
	- 故障处理要求
	- 其他专门要求
- 运行环境规定
	1. 设备
	- 支持软件
	- 接口
	- 控制
- 附录
	1. 数据流图
	- 状态图
	
##引言

###编写目的

这份需求分析报告是针对于`在线支付系统`中的`在线预订`子模块编写的。他说明了子模块的共享功能和性能需求，明确标识各功能的实现过程，阐述实用范围及背景，提供客户解决问题或达到目标所需的条件或权能，提供一个度量和遵循的基准。另一方面，本说明书也是为了提高软件开发过程中的能见度，便于对软件开发过程中的控制与管理，同时也便于程序员和客户之间的交流、协作，并可以作为工作成果的原始依据保存下来。它是用户和开发者对软件初始规定的共同理解，是整个开发工作的基础，它对本子系统的功能、性能、用户界面及运行环境等做出详细的描述，以便于系统的进一步开发工作。

**目的在于**:

- 作为*在线预订*模块开发内容及其约束的参考依据，为开发方与客户方提供参考。
- 根据*在线预订*的运营特点和业务流程，为系统开发者进行设计和编程提供基础。
- 提供测试和验收的依据，即为选取测试用例和进行验收的依据。

**该说明书预期读者**:

- 软件客户
- 项目开发人员
- 软件质量分析员
- 软件维护人员

###背景

**软件系统名称**:

在线预订系统

**任务提出者**

浙江大学软件工程课程任课老师 — 林怀忠

**开发者**

由`浙江大学2014-2015春夏学期` 软件工程课程部分学生组成的项目开发组

**用户**

系统管理员、软件客户

**实现该软件的计算机网络**

由若干台 PC 机组成的局域网

**该软件系统同其他系统或其他机构的基本的相互来往关系**

可以同本课程内的其他项目组所开发的`个人账户管理子系统`、`支付交易处理子系统`、`
在线预订子系统`、`系统管理子系统`拼接组成一个完整的在线支付系统。实际上，我们项目组和`支付交易处理`项目组合作，互相提供接口，完成对接，能够完成从***预订到支付***的整个流程。


**相关背景介绍**

为全面提高学生创新和实践能力，浙江大学软件工程基础课程分为课堂教学和综合性实验两部分。综合性实验采取分组形式完成，每 4 个学生为 1 组，分别设有组长，分析、设计、编码、测试等角色，全面锻炼学生的系统设计与实现能力，测试能力，组织文档能力，以及团队合作能力。综合性实验从实际问题中抽取，贯穿全部重要知识点，通过 7 个步骤的阶段性验收，锻炼学生综合运用每个环节所学知识解决实际问题的能力。本次课程，教师选取在线支付系统作为综合性实验题目。



###定义

- 用户场景：用户场景通常称为用例，它提供了系统将如何被使用的描述。
- IPO 图：是输入/处理/输出图的简称，描述输入数据、对数据的处理和输出数据之间的关系。
- 数据流图：是 SA 方法中用于表示系统逻辑模型的一种工具，它以图形的方式描述数据在系统中流动和处理的过程，它是一种功能模型。
- 状态图：描绘一个系统或组件可能假设的状态，并且显示引起或导致一个状态切换到另一个状态的事件或环境。
- 数据词典：是对所有与系统相关的数据元素的一个有组织的列表、以及精确严格的定义，使得用户和系统分析员对于输入、输出、存储成分和中间计算有共同的理解。

##任务概述

###目标 

在线预订系统实现如下功能：

- 酒店航班预订- 查询酒店、航班信息- 显示信息：按价格、星级、评分排序，在右侧提供特价房和打折机票信息- 预订房间、机票，使用账户完成在线支付
- 评论打分- 预订历史查询- 添加订票服务管理员账户，通过后台系统的接口管理和维护酒店和航班信息同时能够和`支付交易处理`子系统对接，完成从预订到支付完成的整个过程。
###用户特点
预订产品为酒店航班，所以用户为具有一定的经济能力，并且经常是商务人士。
###假定和约束

此次软件开发出于实验性目的，暂无经费划拨，希望项目开发团队能够充分利用现有资源高效地开发出符合需求的系统。电子支付系统由 5 个子系统构成，每个子系统完成其中一部分功能，最后进行系统集成。此项目开发期限较短，因此各个子系统务必要安排好工作进度，保证有一定的时间进行系统集成。个人账户管理系统与其它几个子系统均有关联，因此，务必要做好与其它几个子系统开发团队的沟通协商工作。此次软件开发本着实验教学的目的，同时访问本系统的客户端较少，故对数据处理能力等方面要求不高。
##需求规定
###对功能的规定
####用例描述
#####酒店航班查询

<table>
<tr>
	<td>用例名</td>
	<td colspan='2'>酒店航班查询</td>
</tr>
<tr>
	<td>主要参与者</td>
	<td colspan='2'>用户</td>
</tr>
<tr>
	<td>目标</td>
	<td colspan='2'>通过条件查询，返回相关的酒店航班信息</td>
</tr>
<tr>
	<td>前置条件</td>
	<td colspan='2'>无</td>
</tr>
<tr>
	<td>触发器</td>
	<td colspan='2'>用户想要查询酒店或者航班信息</td>
<tr>
<tr>
	<td>基本事件流</td>
	<td colspan='2'>
		<ol>
			<li>用户登录到查询页面</li>
			<li>用户设定相关的查询参数</li>
			<li>点击查询，如果数据库中有相关信息，则显示出来，否则显示没有相关的信息</li>
			<li>用例结束</li>
		</ol>
	</td>
</tr>
<tr >
	<td>异常及处理</td>
	<td>
		<ol>
			<li>查询条件没有设置或者部分没有设置</li
		</ol>
	</td>
	<td>
		<ol>
			<li>处理:预设默认值，返回默认值的结果</li>
		</ol>
	</td>
</tr>
<tr>
	<td>后置条件</td>
	<td colspan='2'>返回条件查询的结果</td>
</tr>
</table>

#####显示信息

<table>
<tr>
	<td>用例名</td>
	<td colspan='2'>显示信息</td>
</tr>
<tr>
	<td>主要参与者</td>
	<td colspan='2'>用户</td>
</tr>
<tr>
	<td>目标</td>
	<td colspan='2'>显示查询返回信息和侧边栏信息</td>
</tr>
<tr>
	<td>前置条件</td>
	<td colspan='2'>用户查询</td>
</tr>
<tr>
	<td>触发器</td>
	<td colspan='2'>用户查询信息</td>
<tr>
<tr>
	<td>基本事件流</td>
	<td colspan='2'>
		<ol>
			<li>用户查询</li>
			<li>把相关结果显示在网页上和侧边栏</li>
			<li>用户点击价格、星级、评价，显示排序之后的结果</li>
			<li>用例结束</li>
		</ol>
	</td>
</tr>
<tr >
	<td>异常及处理</td>
	<td>
		<ol>
			<li>要显示的结果为空</li
		</ol>
	</td>
	<td>
		<ol>
			<li>处理：提示用户相关酒店或者航班不存在</li>
		</ol>
	</td>
</tr>
<tr>
	<td>后置条件</td>
	<td colspan='2'>返回条件查询的结果</td>
</tr>
</table>


#####预订房间机票

<table>
<tr>
	<td>用例名</td>
	<td colspan='2'>预订房间机票</td>
</tr>
<tr>
	<td>主要参与者</td>
	<td colspan='2'>用户</td>
</tr>
<tr>
	<td>目标</td>
	<td colspan='2'>根据用户选择的酒店航班提交订单，转到支付处理模块</td>
</tr>
<tr>
	<td>前置条件</td>
	<td colspan='2'>
		<ol>
			<li>用户选择酒店航班</li>
			<li>用户已经登录</li>
		</ol>
	</td>
</tr>
<tr>
	<td>触发器</td>
	<td colspan='2'>用户确认选择酒店</td>
<tr>
<tr>
	<td>基本事件流</td>
	<td colspan='2'>
		<ol>
			<li>用户选择酒店航班，提交</li>
			<li>生成订单</li>
			<li>用户确认订单，提交订单</li>
			<li>用例结束</li>
		</ol>
	</td>
</tr>
<tr >
	<td>异常及处理</td>
	<td>
		<ol>
			<li>用户选择的酒店航班为空</li>
			<li>用户还没有登录</li>
			<li>用户选择的酒店不存在或者航班过期</li>
		</ol>
	</td>
	<td>
		<ol>
			<li>处理：返回查询页面，不做其他处理</li>
			<li>处理：保存订单内容，转到登录界面，登录成功则继续处理订单</li>
			<li>处理：返回查询页面，不做其他处理</li>
		</ol>
	</td>
</tr>
<tr>
	<td>后置条件</td>
	<td colspan='2'>订单生成成功，则跳转到支付界面</td>
</tr>
</table>

#####评论打分

<table>
<tr>
	<td>用例名</td>
	<td colspan='2'>评论打分</td>
</tr>
<tr>
	<td>主要参与者</td>
	<td colspan='2'>用户</td>
</tr>
<tr>
	<td>目标</td>
	<td colspan='2'>用户给自己体验过的服务进行评分</td>
</tr>
<tr>
	<td>前置条件</td>
	<td colspan='2'>
		<ol>
			<li>用户支付订单，并且体验完成</li>
			<li>用户已经登录</li>
		</ol>
	</td>
</tr>
<tr>
	<td>触发器</td>
	<td colspan='2'>用户想要打分</td>
<tr>
<tr>
	<td>基本事件流</td>
	<td colspan='2'>
		<ol>
			<li>用户查看预定历史</li>
			<li>点击相关服务的评分按钮，进入评分页面</li>
			<li>对各种角度进行评分，然后提交</li>
			<li>用例结束</li>
		</ol>
	</td>
</tr>
<tr >
	<td>异常及处理</td>
	<td>
		<ol>
			<li>用户没有体验完成服务</li>
			<li>用户在对不是自己的订单进行评分</li>
			<li>用户已经对该订单进行评分</li>
			<li>用户还没有登录</li>
		</ol>
	</td>
	<td>
		<ol>
			<li>处理：提醒用户体验完成，不能进行评分</li>
			<li>处理：返回错误信息，不是用户自己的订单</li>
			<li>处理：返回信息，显示用户过去已经评分，不能再次评分</li>
			<li>处理：返回登录页面</li>
		</ol>
	</td>
</tr>
<tr>
	<td>后置条件</td>
	<td colspan='2'>更新提供该服务的商家的评分</td>
</tr>
</table>


#####预定历史查询

<table>
<tr>
	<td>用例名</td>
	<td colspan='2'>预订历史查询</td>
</tr>
<tr>
	<td>主要参与者</td>
	<td colspan='2'>用户</td>
</tr>
<tr>
	<td>目标</td>
	<td colspan='2'>给用户提供历史预定查询</td>
</tr>
<tr>
	<td>前置条件</td>
	<td colspan='2'>
		<ol>
			<li>用户已经登录</li>
		</ol>
	</td>
</tr>
<tr>
	<td>触发器</td>
	<td colspan='2'>用户想要查看历史订单</td>
<tr>
<tr>
	<td>基本事件流</td>
	<td colspan='2'>
		<ol>
			<li>用户选择历史订单查询</li>
			<li>返回历史订单，显示</li>
			<li>用例结束</li>
		</ol>
	</td>
</tr>
<tr >
	<td>异常及处理</td>
	<td>
		<ol>
			<li>用户历史订单为空</li>
			<li>用户还没有登录</li>
		</ol>
	</td>
	<td>
		<ol>
			<li>处理：提示用户历史订单为空</li>
			<li>处理：转到登录界面</li>
		</ol>
	</td>
</tr>
<tr>
	<td>后置条件</td>
	<td colspan='2'>无</td>
</tr>
</table>


####用例图

![](http://openclazz-filebox.qiniudn.com/1/6/Fgyi_Fj_e2O6a82bE2NVcWfQ5vqY_44E6BE23-2589-483A-97CA-3E098B76D510.png)


###对性能的规定

####精度



<table>
<thead>
<tr>
<th>数据           </th>
<th> 类型             </th>
<th> 精度要求         </th>
<th> 说明     </th>
<th>  示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>商品ID         </td>
<td> 整数             </td>
<td> 整数           </td>
<td> int     </td>
<td>  1234</td>
</tr>
<tr>
<td>商品名字         </td>
<td> 字符串          </td>
<td> 字符串        </td>
<td> 商品名字 </td>
<td> 大床房</td>
</tr>
<tr>
<td>价格           </td>
<td> 整数             </td>
<td> 整数           </td>
<td> int     </td>
<td>  1234</td>
</tr>
<tr>
<td>库存           </td>
<td> 整数             </td>
<td> 整数           </td>
<td> 商品剩下数目  </td>
<td> 30</td>
</tr>
<tr>
<td>商品种类         </td>
<td> 枚举类型       </td>
<td> 枚举类型         </td>
<td> 酒店房间或者航班 </td>
<td> 1</td>
</tr>
<tr>
<td>卖家ID         </td>
<td> 整数             </td>
<td> 整数           </td>
<td> int           </td>
<td> 1234</td>
</tr>
<tr>
<td>订单时间         </td>
<td> timestamp      </td>
<td> timestamp    </td>
<td> 订单时间       </td>
<td> 1234567890</td>
</tr>
<tr>
<td>订单号        </td>
<td> 整数             </td>
<td> 整数           </td>
<td> int           </td>
<td> 123</td>
</tr>
<tr>
<td>评论           </td>
<td> 文本             </td>
<td> 文本           </td>
<td> 评论内容       </td>
<td> 房间睡得很舒服</td>
</tr>
<tr>
<td>评论分数         </td>
<td> 枚举类型       </td>
<td> 枚举类型         </td>
<td> 评价分数       </td>
<td> 5</td>
</tr>
<tr>
<td>评价时间         </td>
<td> Date           </td>
<td> Date         </td>
<td> 评价时间       </td>
<td> 2015-04-10 08:00:00</td>
</tr>
<tr>
<td>折扣           </td>
<td> 整数             </td>
<td> 整数           </td>
<td> 折扣幅度     </td>
<td> 50代表50%</td>
</tr>
</tbody>
</table>

####时间特性要求

- 航班和优惠都具有时效性，所以需要一旦时间达到，就要撤下相关的商品，要求相应级别应该在秒级别。
- 电商对于订单时间的精度有严格要求，所以应该在毫秒，使用时间戳数据类型


####灵活性

当需求发生某些变化的时候，该软件对这些变化的适应。

1. 当筛选商品时需要增加特征，那么只需要在数据库中添加特性列，然后处理逻辑中添加筛选逻辑。
2. 运行环境的变化,对于运行环境的要求不是很高,所以只需要具有数据库以及服务器软件即可运行。
3. 增加商品种类时，只需要在数据库中添加相关数据种类。

###输出输入要求


####数据流定义表


<table>
<thead>
<tr>
<th>编号           </th>
<th> 数据流名     </th>
<th> 来源         </th>
<th> 去向     </th>
<th>  组成    </th>
<th> 说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>L1           </td>
<td> 查询酒店     </td>
<td> 客户         </td>
<td> 客户端   </td>
<td>          </td>
<td> 用户查询指令</td>
</tr>
<tr>
<td>L2           </td>
<td> 指令响应结果   </td>
<td> 客户端      </td>
<td> 显示界面  </td>
<td>        </td>
<td> 响应查询指令，包括正常结果和异常结果处理</td>
</tr>
<tr>
<td>L3           </td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>L3			 | 


###数据管理能力要求

本系统需要管理 4 个数据库表:商品信息、折扣商品、订单、评分表。

商品信息表在需要增加商品的时候增加，商品过期或者被撤下的时候删除。

折扣商品在添加折扣商品的时候增加，折扣期限过了之后删除优惠商品。

订单表会随着订单的添加而增长，有时候数据量大，需要就加快查询的时候添加索引。

评分表只有在添加评论的时候增加数据，且不能出现同一个人对同一份订单评论两次及两次以上。


###故障处理要求

- 软件故障:	
	可能的软件故障有:
	数据库故障,服务器故障等 数据库故障会影响到系统中的数据,造成数据的错误或者丢失。
	由于本系统中对于数据库的操作都集中在相对短的时间内,大部分时间其实是闲置的,所以可以在闲置的时候对数 据库进行备份,比如在每次审核完账单后可以备份一次。
	服务器故障会使得系统客户端界面无法访问,但是因为本系统对于实时性要求不是很高, 审计员也不会一直在使用本系统,进行操作。所以服务器故障对本系统影响不大,重启服务 器所花费的时间对于使用效率来说可以忽略不计,所以处理服务器故障只需要重启服务器即 可。- 硬件故障:	
	可能的硬件故障有:硬盘故障等 硬盘故障同数据库故障造成的影响类似。
	但是硬盘一旦发生故障,数据库文件也无法访问了。所以,应对硬件故障的办法是将数据库文件备份到其他硬盘,来提高可靠性。

###其他专门要求

- 安全性需求:
	- 保密性: 认证:通过账户认证。防止非法用户进入系统。而且每次确认报表都要输入密码,确保是审 计员在操作。
	- 完整性: 防止非法用户对进行交换的数据进行无意或恶意的修改、插入,防止交换的数据丢失。 
	- 账户信息安全性: 系统应着重账户信息安全性设计,做到外界人员无法入侵到系统本身,内部人员操作则留下 操作痕迹,使用权管理层可以定期或不定期地稽核系统。- 可维护性需求: 
	系统设计时应备齐各类文档,操作人员只需阅读文档就可知道所有的操作,维护人中也可以通过文档了解系统结构、设计思路,以便快速掌握整个系统。程序设计时应保持良好的 编程风格,结构清晰、注释明确,使调试、测试人员能快速定位各种错误。系统应提供远程 维护功能,便于及时恢复系统。交付时应文档齐全,说明详尽,文档符合相关标准。

##运行环境规定

###设备

- CPU :≥2.0GHz( 如Intel Mobile Core 2 Duo T5800)- 内存:≥2.0GB- 外围设备:- 键盘:能用即可 
- 鼠标:能用即可  
- 显示器:能用即可 
- 硬盘:≥100GB 硬盘转速:≥7200rpm 
- 通讯设备: 网线:具有良好数据传输能力 
- 客户端的设备要求如下: 能够上网的计算机即可。

###支持软件

-  操作系统： CentOS 6.5，Windows 7,Windows 8,Mac OSX
-  数据库平台：MySQL
-  Web服务器：Apache
-  开发语言：Python，javascript
-  开发工具：Sublime Text,PyCharm,Firefox
-  测试工具：ab
-  建模工具：Xmind,ProcessOn
-  办公软件：Office，Mou
-  协同工具：github，git



###接口


###控制

控制信号来源就是鼠标、键盘。在客户端操作界面具有相应的功能按钮,用户通过点击功能按钮来传递控制信号,有些功能需要选择或者输入参数来传递控制信号。

##附录

###数据流图

###状态图



	

 

